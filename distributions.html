<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Interactive Distribution Graphs</title>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <style>
    * {margin:0;padding:0;box-sizing:border-box;font-family:'Segoe UI',Tahoma,Geneva,Verdana,sans-serif;}
    body {background:linear-gradient(135deg,#808cbb,#532626,#694e13);color:#fff;min-height:100vh;padding:20px;}
    .container {max-width:1200px;margin:0 auto;}
    header {text-align:center;padding:30px 0;margin-bottom:30px;}
    h1 {font-size:2.8rem;margin-bottom:10px;text-shadow:2px 2px 4px rgba(0,0,0,0.3);}
    .subtitle {font-size:1.2rem;opacity:0.9;max-width:700px;margin:0 auto;line-height:1.6;}
    .controls {background:rgba(255,255,255,0.1);backdrop-filter:blur(10px);border-radius:15px;padding:25px;margin-bottom:30px;box-shadow:0 8px 32px rgba(0,0,0,0.2);}
    .distribution-selector {display:flex;flex-wrap:wrap;gap:10px;margin-bottom:20px;justify-content:center;}
    .distribution-btn {padding:12px 24px;background:rgba(255,255,255,0.15);border:2px solid rgba(255,255,255,0.3);border-radius:50px;color:white;font-weight:600;cursor:pointer;transition:all 0.3s ease;}
    .distribution-btn:hover {background:rgba(255,255,255,0.25);transform:translateY(-2px);}
    .distribution-btn.active {background:rgba(255,255,255,0.35);border-color:rgba(255,255,255,0.7);box-shadow:0 0 15px rgba(255,255,255,0.3);}
    .form-list {margin-top:15px;display:flex;flex-direction:column;gap:20px;}
    .parameter-controls {display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:20px;margin-top:10px;}
    .parameter {display:flex;flex-direction:column;gap:8px;}
    .parameter label {font-weight:600;font-size:1rem;}
    .parameter input {padding:10px;border-radius:8px;border:1px solid rgba(255,255,255,0.3);background:rgba(255,255,255,0.1);color:white;font-size:1rem;}
    .add-form-btn {padding:10px 20px;background:rgba(255,255,255,0.15);border:2px solid rgba(255,255,255,0.3);border-radius:10px;color:white;font-weight:600;cursor:pointer;transition:0.3s;}
    .add-form-btn:hover {background:rgba(255,255,255,0.25);}
    .graphs {display:grid;grid-template-columns:1fr 1fr;gap:25px;margin-bottom:40px;}
    .graph-container {background:rgba(255,255,255,0.1);backdrop-filter:blur(10px);border-radius:15px;padding:20px;box-shadow:0 8px 32px rgba(0,0,0,0.2);height:450px;position:relative;}
    .graph-title {text-align:center;margin-bottom:15px;font-size:1.4rem;font-weight:600;}
    .info-section {background:rgba(255,255,255,0.1);backdrop-filter:blur(10px);border-radius:15px;padding:25px;margin-bottom:30px;box-shadow:0 8px 32px rgba(0,0,0,0.2);}
    .info-title {font-size:1.5rem;margin-bottom:15px;text-align:center;}
    .info-content {line-height:1.6;font-size:1.05rem;}
  </style>
</head>
<body>
  <div class="container">
    <header>
      <h1>Interactive Distribution Graphs</h1>
      <p class="subtitle">Create multiple forms to compare different distribution settings in separate charts.</p>
    </header>

    <div class="controls">
      <div class="distribution-selector">
        <button class="distribution-btn active" data-dist="normal">Normal</button>
        <button class="distribution-btn" data-dist="uniform">Uniform</button>
        <button class="distribution-btn" data-dist="exponential">Exponential</button>
        <button class="distribution-btn" data-dist="binomial">Binomial</button>
        <button class="distribution-btn" data-dist="laplace">Laplace</button>
        <button class="distribution-btn" data-dist="dirac">Dirac / Empirical</button>
      </div>
      <button class="add-form-btn">Add New Form</button>
      <div class="form-list" id="formList"></div>
    </div>

    <div class="graphs" id="graphsContainer">
      <div class="graph-container"><div class="graph-title">PDF</div><canvas id="pdf-graph-1"></canvas></div>
      <div class="graph-container"><div class="graph-title">CDF</div><canvas id="cdf-graph-1"></canvas></div>
    </div>

    <div class="info-section">
      <h2 class="info-title">About Normal Distribution</h2>
      <div class="info-content"></div>
    </div>
  </div>

  <script>
    const distributionBtns=document.querySelectorAll('.distribution-btn');
    const addFormBtn=document.querySelector('.add-form-btn');
    const formList=document.getElementById('formList');
    const graphsContainer=document.getElementById('graphsContainer');
    const infoTitle=document.querySelector('.info-title');
    const infoContent=document.querySelector('.info-content');

    let formCount=1,currentDistribution='normal';

    const distributionInfo={
      normal:{title:'Normal Distribution',content:`<p>Symmetric bell curve characterized by mean μ and std σ.</p>`},
      uniform:{title:'Uniform Distribution',content:`<p>All outcomes equally likely within [a,b].</p>`},
      exponential:{title:'Exponential Distribution',content:`<p>Describes time between events with rate λ.</p>`},
      binomial:{title:'Binomial Distribution',content:`<p>Discrete distribution counting successes in n trials.</p>`},
      laplace:{title:'Laplace Distribution',content:`<p>Sharper peak and heavier tails than Normal. Defined by mean μ and scale b.</p>`},
      dirac:{title:'Dirac / Empirical Distribution',content:`<p>All probability mass concentrated at a single point μ.</p>`}
    };

    const chartConfig={type:'line',options:{responsive:true,maintainAspectRatio:false,plugins:{legend:{display:false},},scales:{x:{ticks:{color:'#fff'}},y:{ticks:{color:'#fff'}}},elements:{point:{radius:0}}}};

    const charts={pdf:[],cdf:[]};

    function calculatePDF(x,dist,p1,p2){switch(dist){case'normal':return(1/(p2*Math.sqrt(2*Math.PI)))*Math.exp(-0.5*((x-p1)/p2)**2);case'uniform':return(x>=p1&&x<=p2)?1/(p2-p1):0;case'exponential':return x>=0?p1*Math.exp(-p1*x):0;case'binomial':const n=Math.round(p1),p=p2;if(x>=0&&x<=n&&Number.isInteger(x))return binom(n,x)*p**x*(1-p)**(n-x);return 0;case'laplace':const b=p2;return(1/(2*b))*Math.exp(-Math.abs(x-p1)/b);case'dirac':const s=0.05;return(1/(s*Math.sqrt(2*Math.PI)))*Math.exp(-0.5*((x-p1)/s)**2);default:return 0;}}
    function calculateCDF(x,dist,p1,p2){switch(dist){case'normal':return 0.5*(1+erf((x-p1)/(p2*Math.sqrt(2))));case'uniform':if(x<p1)return 0;if(x>p2)return 1;return(x-p1)/(p2-p1);case'exponential':return x>=0?1-Math.exp(-p1*x):0;case'binomial':let sum=0;const n=Math.round(p1),p=p2;for(let k=0;k<=x;k++){if(Number.isInteger(k))sum+=binom(n,k)*p**k*(1-p)**(n-k);}return sum;case'laplace':const b=p2;if(x<p1)return 0.5*Math.exp((x-p1)/b);else return 1-0.5*Math.exp(-(x-p1)/b);case'dirac':return x<p1?0:1;default:return 0;}}
    function binom(n,k){if(k<0||k>n)return 0;if(k===0||k===n)return 1;k=Math.min(k,n-k);let r=1;for(let i=1;i<=k;i++)r*=(n-k+i)/i;return Math.round(r);}function erf(x){const a1=0.254829592,a2=-0.284496736,a3=1.421413741,a4=-1.453152027,a5=1.061405429,p=0.3275911;const s=(x>=0)?1:-1;x=Math.abs(x);const t=1/(1+p*x);const y=1-(((((a5*t+a4)*t)+a3)*t+a2)*t+a1)*t*Math.exp(-x*x);return s*y;}

    function generateData(d,p1,p2,xMin,xMax){let xs=[],pdfs=[],cdfs=[];const pts=d==='binomial'?Math.round(p1):200;for(let i=0;i<=pts;i++){const x=d==='binomial'?i:xMin+(xMax-xMin)*i/pts;xs.push(x);pdfs.push(calculatePDF(x,d,p1,p2));cdfs.push(calculateCDF(x,d,p1,p2));}return{xs,pdfs,cdfs};}

    function createForm(id){const form=document.createElement('div');form.classList.add('parameter-controls');form.innerHTML=`
      <div class="parameter"><label>Mean / Param1</label><input type="number" step="0.1" value="0" class="param1"></div>
      <div class="parameter"><label>Std / Param2</label><input type="number" step="0.1" value="1" class="param2"></div>
      <div class="parameter"><label>X Min</label><input type="number" step="0.1" value="-5" class="xMin"></div>
      <div class="parameter"><label>X Max</label><input type="number" step="0.1" value="5" class="xMax"></div>`;
      formList.appendChild(form);
      const pdfCanvas=document.createElement('canvas');pdfCanvas.id=`pdf-graph-${id}`;
      const cdfCanvas=document.createElement('canvas');cdfCanvas.id=`cdf-graph-${id}`;
      const pdfContainer=document.createElement('div');pdfContainer.classList.add('graph-container');pdfContainer.innerHTML=`<div class='graph-title'>PDF ${id}</div>`;pdfContainer.appendChild(pdfCanvas);
      const cdfContainer=document.createElement('div');cdfContainer.classList.add('graph-container');cdfContainer.innerHTML=`<div class='graph-title'>CDF ${id}</div>`;cdfContainer.appendChild(cdfCanvas);
      graphsContainer.appendChild(pdfContainer);graphsContainer.appendChild(cdfContainer);

      const update=()=>{const p1=parseFloat(form.querySelector('.param1').value),p2=parseFloat(form.querySelector('.param2').value),xMin=parseFloat(form.querySelector('.xMin').value),xMax=parseFloat(form.querySelector('.xMax').value);const {xs,pdfs,cdfs}=generateData(currentDistribution,p1,p2,xMin,xMax);
        const pdfData={labels:xs,datasets:[{label:'PDF',data:pdfs,borderColor:'#00ffff',fill:false,tension:0.4}]};
        const cdfData={labels:xs,datasets:[{label:'CDF',data:cdfs,borderColor:'#ffff00',fill:false,tension:0.4}]};
        if(!charts.pdf[id-1]){charts.pdf[id-1]=new Chart(pdfCanvas,{...chartConfig,data:pdfData});}else{charts.pdf[id-1].data=pdfData;charts.pdf[id-1].update();}
        if(!charts.cdf[id-1]){charts.cdf[id-1]=new Chart(cdfCanvas,{...chartConfig,data:cdfData});}else{charts.cdf[id-1].data=cdfData;charts.cdf[id-1].update();}
      };
      form.querySelectorAll('input').forEach(i=>i.addEventListener('input',update));
      update();
    }

    function updateInfo(){infoTitle.textContent=`About ${distributionInfo[currentDistribution].title}`;infoContent.innerHTML=distributionInfo[currentDistribution].content;}

    addFormBtn.addEventListener('click',()=>{formCount++;createForm(formCount);});

    distributionBtns.forEach(btn=>btn.addEventListener('click',()=>{distributionBtns.forEach(b=>b.classList.remove('active'));btn.classList.add('active');currentDistribution=btn.dataset.dist;updateInfo();for(let i=1;i<=formCount;i++){const form=document.querySelectorAll('.parameter-controls')[i-1];if(form){form.querySelectorAll('input').forEach(input=>input.dispatchEvent(new Event('input')));}}}));

    createForm(1);
    updateInfo();
  </script>
</body>
</html>